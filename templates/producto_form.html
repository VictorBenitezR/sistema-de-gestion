{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>{% if titulo_form %}{{ titulo_form }}{% else %}Crear Producto{% endif %}</title>
    <link rel="stylesheet" href="{% static 'inventario/css/styles.css' %}" />
</head>

<body style="background-color: #f0f0f0;">
    <div class="auth-container" style="width: 450px; margin-top: 50px;">
        
        {% if titulo_form %}
            <h2>{{ titulo_form }}</h2>
        {% else %}
            <h2>Crear Nuevo Producto</h2>
        {% endif %}

        {% if mensaje %}
            <div class="validation-message {% if es_error %}validation-error{% else %}validation-success{% endif %}">
                {{ mensaje }}
            </div>
        {% endif %}

        <form method="post" action="
            {% if producto_pk %}
                {% url 'editar_producto' pk=producto_pk %}
            {% else %}
                {% url 'crear_producto' %}
            {% endif %}
        ">
            {% csrf_token %}

            <div class="form-field">
                <label for="nombre">Nombre del Producto</label>
                <input type="text" id="nombre" name="nombre" value="{{ nombre_prev }}" required>
            </div>

            <div class="form-field">
                <label for="categoria">Categoría</label>
                <select id="categoria" name="categoria" required>
                    <option value="">--- Seleccione una categoría ---</option>
                    {% for cat in categorias %}
                        <option 
                            value="{{ cat.pk }}" 
                            {% if cat.pk|stringformat:"s" == categoria_id_prev %}selected{% endif %}
                        >
                            {{ cat.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-field">
                <label for="stock">Stock Inicial (Unidades)</label>
                <input type="number" id="stock" name="stock" value="{{ stock_prev }}" min="0" required>
            </div>

            <div class="form-field">
                <label for="precio">Precio de Venta (Gs. o USD)</label>
                <input type="number" id="precio" name="precio" value="{{ precio_prev|floatformat:2 }}" min="0.01" step="0.01" required>
            </div>

            
            <div class="form-actions" style="justify-content: space-between; margin-top: 30px;">
                <a href="{% url 'listar_productos' %}" class="auth-button" style="background-color: #6c757d; text-decoration: none;">Volver al Listado</a>
                
                <button type="submit" class="auth-button" style="background-color: #007bff;">
                    {% if producto_pk %}Actualizar Producto{% else %}Guardar Producto{% endif %}
                </button>
            </div>
        </form>
    </div>
</body>
</html>